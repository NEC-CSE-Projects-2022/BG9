{% extends "layout.html" %}
{% block content %}

<style>
/* Full-screen background with vibrant gradient overlay */
body {
    margin: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: url("{{ url_for('static', filename='images/oceans.jpg') }}") no-repeat center center fixed;
    background-size: cover;
    position: relative;
    color: #fff;
}

/* Gradient overlay instead of dark grey */
body::before {
    content: "";
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: linear-gradient(to bottom right, rgba(0, 191, 255, 0.3), rgba(255, 165, 0, 0.2));
    z-index: -1;
}

/* Glass-effect card */
.card {
    background: rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(12px);
    border-radius: 18px;
    padding: 25px;
    margin-bottom: 25px;
    box-shadow: 0 8px 25px rgba(0,0,0,0.25);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}
.download-icon {
  position: absolute;
  bottom: 8px;
  right: 8px;
  color: rgb(0, 0, 0);
  padding: 6px 10px;
  border-radius: 50%;
  font-size: 16px;
  text-decoration: none;
  display: flex;
  justify-content: center;
  align-items: center;
  box-shadow: 0 4px 10px rgba(205, 123, 173, 0.2);
  transition: all 0.3s ease;
  cursor: pointer;
}

.download-icon:hover {
  background: #ffffff;
  transform: scale(1.2);
  box-shadow: 0 6px 15px rgba(212, 209, 209, 0.3);
}

.card:hover {
    transform: translateY(-5px);
    
}
.dataset-btn {
    display: inline-block;
    margin-top: 15px;
    padding: 12px 22px;
    background: linear-gradient(135deg, #00bfff, #7db9f5);
    color: white;
    border-radius: 30px;
    text-decoration: none;
    font-weight: 600;
    box-shadow: 0 6px 18px rgba(99, 167, 222, 0.25);
    transition: all 0.3s ease;
}

.dataset-btn:hover {
    transform: scale(1.08);
    box-shadow: 0 10px 25px rgba(0,0,0,0.35);
    background: linear-gradient(135deg, #4a6a76, #000000);
}

/* Headings and text */
h2, h3, h4 {
    color: #f8f8f8;
    margin-top: 0;
}

p {
    line-height: 1.6;
    font-size: 16px;
}

/* Image inside cards */
.preview {
    width: 100%;
    border-radius: 12px;
    margin-top: 12px;
}

/* Grid layout */
.grid {
    display: grid;
    gap: 20px;
    margin-top: 15px;
}

.grid-4 {
    grid-template-columns: repeat(4, 1fr);
}

.metrics-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 20px;
    margin-top: 15px;
}

.metric-card {
    background: rgba(255,255,255,0.1);
    border-radius: 15px;
    padding: 18px;
    text-align: center;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.metric-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 12px 25px rgba(0,0,0,0.4);
}

.metric-title {
    font-size: 16px;
    color: #0f0f0f;
}

.metric-value {
    font-size: 22px;
    font-weight: bold;
    color: #00bfff;
}

/* Responsive */
@media(max-width: 1024px){
    .grid-4 { grid-template-columns: repeat(2, 1fr); }
    .metrics-grid { grid-template-columns: repeat(2, 1fr); }
}

@media(max-width: 600px){
    .grid-4, .metrics-grid { grid-template-columns: 1fr; }
}
</style>

<!-- About Page Content -->
<div class="card">
    <h2>Problem Statement</h2>
    <p>
        Identifying microplastics in environmental samples is challenging due to their small size,
        similar appearance to natural particles, and varied textures. This project builds an HSL-based 
        SwinV2 deep learning classifier to automatically differentiate microplastics from non-microplastic materials.
    </p>
</div>

<div class="card">
    <h2>Dataset</h2>
    <p>
        This project uses the <strong>Holographic Microplastic Dataset (HMPD)</strong>, which
        contains paired <strong>amplitude (A)</strong> and <strong>phase (P)</strong> holographic images for
        two classes: <em>microplastic</em> and <em>non-microplastic</em>.
    </p>
    <p>
        Total <strong>6,586 images</strong> with <strong>3,293 microplastic</strong> and <strong>3,293 non-microplastic</strong>,
        perfectly balanced to improve model generalization.
    </p>
    <!-- ✅ Download Button -->
    <a href="https://github.com/beppe2hd/HMPD/archive/refs/heads/main.zip" 
       class="dataset-btn" 
       download>
       ⬇ Download Dataset (HMPD)
    </a>
</div>

<div class="card">
    <h2>Sample Dataset Images</h2>
    <p class="muted">Example holographic samples after preprocessing and HSL fusion.</p>
    <div class="grid grid-4">
        {% for i in range(1,9) %}
        <div class="card">
            <img src="{{ url_for('static', filename='images/dataset_' ~ i ~ '.bmp') }}" class="preview" alt="Dataset sample {{i}}">
            <a class="download-icon" href="{{ url_for('static', filename='images/dataset_' ~ i ~ '.bmp' )}}" download>⬇</a>
        </div>
        {% endfor %}
    </div>
</div>

<div class="card">
    <h3>Preprocessing</h3>
    <div class="grid">
        <div class="card">
            <h4>Before Preprocessing</h4>
            <img src="{{ url_for('static', filename='images/after.jpg') }}" class="preview">
        </div>
        <div class="card">
            <h4>After Preprocessing</h4>
            <img src="{{ url_for('static', filename='images/before.jpg') }}" class="preview">
        </div>
    </div>
</div>

<div class="card">
    <h2>Model Architecture</h2>
    <p>
        Amplitude and phase images are fused in HSL colour space to create an RGB representation.
        The SwinV2 Tiny transformer processes the fused image to extract hierarchical features.
        The classifier outputs the probability of the sample being microplastic or non-microplastic.
    </p>
    <img src="{{ url_for('static', filename='images/flowchart.jpg') }}" class="preview" alt="Model architecture diagram">
</div>

<div class="grid">
    <div class="card">
        <h3>Confusion Matrix</h3>
        <img src="{{ url_for('static', filename='images/image.png') }}" class="preview" alt="Confusion Matrix">
    </div>
    <div class="card">
        <h3>ROC Curve</h3>
        <img src="{{ url_for('static', filename='images/roc.jpg') }}" class="preview" alt="ROC Curve">
    </div>
</div>

<div class="card">
    <h2>Model Performance Metrics</h2>
    <div class="metrics-grid">
        <div class="metric-card">
            <div class="metric-title">Accuracy</div>
            <div class="metric-value">91.65%</div>
        </div>
        <div class="metric-card">
            <div class="metric-title">Precision</div>
            <div class="metric-value">89.3%</div>
        </div>
        <div class="metric-card">
            <div class="metric-title">Recall</div>
            <div class="metric-value">94.6%</div>
        </div>
        <div class="metric-card">
            <div class="metric-title">F1 Score</div>
            <div class="metric-value">91.7%</div>
        </div>
    </div>
</div>

{% endblock %}
